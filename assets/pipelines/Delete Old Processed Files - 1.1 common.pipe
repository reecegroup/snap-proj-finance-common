{"asset_type":"Pipeline","path":"/Reece-Dev/-Finance/Common/Delete Old Processed Files - 1.1 common","name":"Delete Old Processed Files - 1.1 common","owner":"snaplogic.support@reece.com.au","time_updated":"2023-05-24T05:43:57.357000","property_map":{"info":{"notes":{"value":null},"label":{},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"author":{"value":"bhavana.sutapalli@reece.com.au"}},"error":{"error_behavior":{"value":"none"}},"settings":{"imports":{"value":[]},"error_param_table":{"value":[]},"param_table":{"value":[{"capture":{"value":true},"description":{"value":null},"data_type":{"value":"string"},"required":{"value":false},"value":{"value":"../shared/Finance Windows File Share SMB"},"key":{"value":"account"}}]},"error_pipeline":{"expression":false,"value":null}},"input":{"11111111-1111-1111-1111-000000000000_in":{"label":{"value":"Directory Browser - Input view"},"view_type":{"value":"document"}}},"output":{"11111111-1111-1111-1111-000000000004_output102":{"view_type":{"value":"document"},"label":{"value":"File Delete - output0"}}}},"render_map":{"pan_x_num":0,"default_snaplex":null,"scale_ratio":1,"detail_map":{"11111111-1111-1111-1111-000000000003":{"grid_x_int":4,"index":null,"recommendation_id":null,"output":{},"source":"","grid_y_int":1,"rot_tail_int":0,"error":{},"input":{},"rot_int":0},"11111111-1111-1111-1111-000000000001":{"grid_x_int":3,"index":null,"recommendation_id":null,"source":"","grid_y_int":1,"rot_tail_int":0,"rot_int":0,"input":{},"output":{},"error":{}},"11111111-1111-1111-1111-000000000004":{"grid_x_int":5,"index":null,"recommendation_id":null,"source":"","grid_y_int":1,"rot_tail_int":0,"rot_int":0,"input":{},"output":{},"error":{}},"11111111-1111-1111-1111-000000000002":{"grid_x_int":3,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":2,"rot_tail_int":0,"input":{},"rot_int":0,"output":{},"error":{}},"11111111-1111-1111-1111-000000000000":{"grid_x_int":2,"index":null,"recommendation_id":null,"output":{},"source":"","grid_y_int":1,"rot_tail_int":0,"error":{},"input":{},"rot_int":0}},"pan_y_num":0},"class_id":"com-snaplogic-pipeline","class_version":9,"snap_map":{"11111111-1111-1111-1111-000000000004":{"instance_id":"11111111-1111-1111-1111-000000000004","class_id":"com-snaplogic-snaps-binary-delete","property_map":{"info":{"notes":{},"label":{"value":"File Delete"}},"view_serial":102,"account":{"account_ref":{"expression":true,"value":"_account"}},"settings":{"retryInterval":{"expression":false,"value":1},"retries":{"expression":false,"value":2},"execution_mode":{"value":"Execute only"},"filePath":{"expression":true,"value":"$Path"},"executable_during_suggest":{"value":false},"deleteAction":{"value":"ERROR if file not found"},"advancedProperties":{"value":[]},"validate":{"value":false}},"output":{"output102":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input101":{"view_type":{"value":"document"},"label":{"value":"input0"}}}},"class_version":1},"11111111-1111-1111-1111-000000000000":{"instance_id":"11111111-1111-1111-1111-000000000000","class_id":"com-snaplogic-snaps-binary-directorybrowser","property_map":{"info":{"notes":{},"label":{"value":"Directory Browser"}},"view_serial":100,"account":{"account_ref":{"expression":true,"value":"_account"}},"input":{"in":{"label":{"value":"Input view"},"view_type":{"value":"document"}}},"settings":{"retryInterval":{"expression":false,"value":1},"retries":{"expression":false,"value":0},"execution_mode":{"value":"Validate & Execute"},"s3SubfolderMetadataProp":{"value":true},"Filter":{"expression":false,"value":"*"},"advancedProperties":{"value":[]},"Directory":{"expression":true,"value":"$smbProcessedDir"},"ignoreEmptyResult":{"value":true}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"out":{"label":{"value":"Output view"},"view_type":{"value":"document"}}}},"class_version":1},"11111111-1111-1111-1111-000000000003":{"instance_id":"11111111-1111-1111-1111-000000000003","class_id":"com-snaplogic-snaps-flow-filter","property_map":{"info":{"notes":{},"label":{"value":"Filter the files  not in date range"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"filterExpression":{"expression":true,"value":"Date.parse($delete_from_date) > Date.parse($original_file_date)"},"nullSafeAccess":{"value":false},"execution_mode":{"value":"Validate & Execute"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":2},"11111111-1111-1111-1111-000000000001":{"instance_id":"11111111-1111-1111-1111-000000000001","class_id":"com-snaplogic-snaps-transform-datatransform","property_map":{"info":{"notes":{},"label":{"value":"Set date from when deleted"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"execution_mode":{"value":"Validate & Execute"},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"$['Update date'].split('T')[0]"},"targetPath":{"value":"$original_file_date"}},{"expression":{"expression":true,"value":"$Path"},"targetPath":{"value":"$Path"}},{"expression":{"expression":true,"value":"Date.now().minusMonths($original.retentionWindow).toString().split('T')[0]"},"targetPath":{"value":"$delete_from_date"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":4},"11111111-1111-1111-1111-000000000002":{"instance_id":"11111111-1111-1111-1111-000000000002","class_id":"com-snaplogic-snaps-transform-jsongenerator","property_map":{"info":{"notes":{},"label":{"value":"JSON Generator"}},"view_serial":100,"input":{},"settings":{"arrayElementsAsDocuments":{"value":true},"execution_mode":{"value":"Disabled"},"editable_content":{"value":"[\n    {\n        \"smbAccount\": \"../shared/Finance Windows File Share SMB\",\n        \"smbProcessedDir\": \"smb://reecenet.org/DFSRoot/Reece/Oracle Financials/Integration/Test/Journal/error/\",\n        \"retentionWindow\": 12\n    }\n]"},"supportTypeExts":{"value":false},"passThroughProp":{"value":false}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":2}},"link_map":{"link102":{"src_view_id":"output0","dst_view_id":"input0","src_id":"11111111-1111-1111-1111-000000000001","dst_id":"11111111-1111-1111-1111-000000000003"},"link120":{"src_view_id":"out","dst_view_id":"input0","src_id":"11111111-1111-1111-1111-000000000000","dst_id":"11111111-1111-1111-1111-000000000001"},"link121":{"src_view_id":"output0","dst_view_id":"input101","src_id":"11111111-1111-1111-1111-000000000003","dst_id":"11111111-1111-1111-1111-000000000004"}},"target_runtime":"standard"}