{"asset_type":"Pipeline","path":"/Reece-Dev/-Finance/Common/z_email_notification","name":"z_email_notification","owner":"snaplogic.support@reece.com.au","time_updated":"2022-10-08T18:37:52.261000","property_map":{"info":{"notes":{"value":null},"label":{},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"author":{"value":"harry.bobadilla@reece.com.au"}},"settings":{"imports":{"value":[]},"error_param_table":{"value":[]},"param_table":{"value":[]},"error_pipeline":{"expression":false,"value":null}},"error":{"error_behavior":{"value":"none"}},"input":{"11111111-1111-1111-1111-000000000000_input0":{"label":{"value":"Map table data - input0"},"view_type":{"value":"document"}}},"output":{"11111111-1111-1111-1111-000000000003_output103":{"view_type":{"value":"document"},"label":{"value":"Send E-Mail - output0"}}}},"render_map":{"pan_x_num":0,"default_snaplex":null,"scale_ratio":1,"detail_map":{"11111111-1111-1111-1111-000000000003":{"grid_x_int":5,"index":null,"recommendation_id":null,"output":{},"source":"","grid_y_int":1,"rot_tail_int":0,"error":{},"input":{},"rot_int":0},"11111111-1111-1111-1111-000000000000":{"grid_x_int":2,"input":{},"index":null,"recommendation_id":null,"source":"","grid_y_int":1,"rot_tail_int":0,"error":{},"output":{},"rot_int":0},"11111111-1111-1111-1111-000000000002":{"grid_x_int":4,"index":null,"recommendation_id":null,"output":{},"source":"","grid_y_int":1,"rot_tail_int":0,"error":{},"input":{},"rot_int":0},"11111111-1111-1111-1111-000000000001":{"grid_x_int":3,"index":null,"recommendation_id":null,"source":"","grid_y_int":1,"rot_tail_int":0,"rot_int":0,"input":{},"output":{},"error":{}}},"pan_y_num":0},"class_id":"com-snaplogic-pipeline","class_version":9,"snap_map":{"11111111-1111-1111-1111-000000000002":{"instance_id":"11111111-1111-1111-1111-000000000002","class_id":"com-snaplogic-snaps-transform-datatransform","property_map":{"info":{"notes":{},"label":{"value":"Compose Email Notification"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"execution_mode":{"value":"Validate & Execute"},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"$.get('original',$).get('EmailNotification').mapValues((val, key)=> key == 'html' ? $xml.replace('<?xml version=\"1.0\" encoding=\"UTF-8\"?>','').replace(/&lt;|&gt;|&amp;|&quot;|&apos;/g, m => match m {'&lt;'=> '<', '&gt;'=> '>' , '&amp;'=> '&', '&quot;'=> '\"', '&apos;'=> \"'\"}): val).filter((val, key)=> !('body,table'.contains(key)))"},"targetPath":{"value":"$email"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":4},"11111111-1111-1111-1111-000000000001":{"instance_id":"11111111-1111-1111-1111-000000000001","class_id":"com-snaplogic-snaps-transform-xmlgenerator","property_map":{"info":{"notes":{},"label":{"value":"Html table"}},"view_serial":101,"input":{"input101":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"execution_mode":{"value":"Validate & Execute"},"defaultValue":{"value":null},"rootElement":{"expression":false,"value":null},"schemaXPath":{"value":null},"escapeSpecialChars":{"value":true},"useDefaultValue":{"value":false},"tableNSContext":{"value":[]},"inboundSchema":{"expression":false,"value":null},"validate":{"value":false},"editable_content":{"value":"<div>\n    <table style=\"border-collapse:collapse; width:auto; text-align:left;\">\n        #foreach($detail in $body)\n        <tr>\n            <th style=\"padding: 5px;\" colspan=\"1\">\n                <p style=\"color:#34b1eb;text-align:left;\">$detail[0]</p>\n            </th>\n            <th style=\"padding: 5px; \" colspan=\"1\">\n                <p style=\"color:#053668; text-align:left;\">$detail[1]</p>\n            </th>        \n        </tr>    \n        #end\n    </table>\n    <table style=\"border-collapse:collapse; width:auto; text-align:center;\">\n        <tr>\n            #foreach($header in $headers)\n            <th style=\"padding: 5px; border:2px solid; text-align:center;\">$header</th>\n            #end\n        </tr>\n        #foreach($row in $rows)\n        <tr>\n            #foreach($val in $row)\n            <td style=\"padding: 5px; border:2px solid; text-align:left;\">$val</td>\n            #end\n        </tr>\n        #end        \n    </table>\n</div>"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":1},"11111111-1111-1111-1111-000000000000":{"instance_id":"11111111-1111-1111-1111-000000000000","class_id":"com-snaplogic-snaps-transform-datatransform","property_map":{"info":{"notes":{},"label":{"value":"Map table data"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":true},"execution_mode":{"value":"Validate & Execute"},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"$.get('EmailNotification').get('table',[{}])[0].keys()"},"targetPath":{"value":"$headers"}},{"expression":{"expression":true,"value":"$.get('EmailNotification').get('table',[{}]).map(r=> r.values())"},"targetPath":{"value":"$rows"}},{"expression":{"expression":true,"value":"$.get('EmailNotification').get('body',[])"},"targetPath":{"value":"$body"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":4},"11111111-1111-1111-1111-000000000003":{"class_id":"com-snaplogic-snaps-rest-post","instance_id":"11111111-1111-1111-1111-000000000003","property_map":{"info":{"notes":{"value":null},"label":{"value":"Send E-Mail"}},"view_serial":103,"account":{"account_ref":{"expression":false,"value":{"ref_id":{"expression":false,"value":null},"ref_class_id":{"value":"com-snaplogic-snaps-rest-restbasicauthaccount"},"label":{"expression":false,"value":"Shared Service REST","label":"../../shared/Shared Service REST"}}}},"settings":{"mimeType":{"expression":false,"value":"application/octet-stream"},"execution_mode":{"value":"Validate & Execute"},"entity":{"expression":true,"value":"$email"},"header":{"value":[{"headerKey":{"expression":false,"value":"Content-Type"},"headerValue":{"expression":false,"value":"application/json"}}]},"rawData":{"value":false},"retry":{"value":1},"uploadFile":{"expression":false,"value":null},"showAllHeaders":{"value":true},"batchSize":{"value":null},"uploadTransferRequestType":{"value":"Chunked transfer encoding"},"followRedirects":{"value":true},"uploadFiles":{"value":[{"multiFileMimeType":{"expression":false,"value":null},"uploadFileName":{"expression":false,"value":null},"uploadFile":{"expression":false,"value":null},"partType":{"value":"FILE"},"entity":{"expression":true,"value":null},"uploadFileKey":{"expression":false,"value":"file"}}]},"retryInterval":{"value":3},"trustAllCerts":{"value":true},"normalizeUri":{"value":true},"executable_during_suggest":{"value":false},"serviceUrl":{"expression":true,"value":"$email.endpoint"},"connTimeout":{"value":30},"uploadFileName":{"expression":false,"value":null},"retryPolicy":{"value":"Connection errors"},"queryParams":{"value":[]},"responseEntityType":{"value":"DEFAULT"},"timeout":{"value":15},"uploadFileKey":{"expression":false,"value":"file"},"uploadBodyType":{"value":"Multipart form-data"}},"output":{"output103":{"label":{"value":"output0"},"view_type":{"value":"document"}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}}},"class_version":1}},"link_map":{"link112":{"src_view_id":"output0","dst_view_id":"input101","src_id":"11111111-1111-1111-1111-000000000000","dst_id":"11111111-1111-1111-1111-000000000001"},"link120":{"src_view_id":"output0","dst_view_id":"input0","src_id":"11111111-1111-1111-1111-000000000002","dst_id":"11111111-1111-1111-1111-000000000003"},"link103":{"src_view_id":"output0","dst_view_id":"input0","src_id":"11111111-1111-1111-1111-000000000001","dst_id":"11111111-1111-1111-1111-000000000002"}},"target_runtime":"standard"}